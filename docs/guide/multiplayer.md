# 多设备联动

DesktopFriends 支持多个设备之间的联动，让你的桌面宠物可以互相对话。

## 工作原理

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   手机 A    │     │  中继服务器  │     │   手机 B    │
│   宠物 A    │◄───►│   (PC)      │◄───►│   宠物 B    │
└─────────────┘     └─────────────┘     └─────────────┘
```

所有设备通过中继服务器进行通信，宠物之间可以：
- 发送消息
- 同步动作和表情
- 自动对话（需要配置 AI）

## 设置步骤

### 1. 启动中继服务器

在电脑上运行中继服务器：

```bash
cd DesktopFriends
pnpm --filter @desktopfriends/server dev
```

服务器默认运行在 `http://localhost:3000`

或者手机端一键启动服务器，会提示有服务器地址

### 2. 连接设备

在每台手机的 DesktopFriends 应用中：

1. 打开设置
2. 输入服务器地址（如 `http://192.168.1.100:3000`）
3. 开启自动连接

### 3. 开启自动对话

点击左上角的宠物按钮，勾选「自动对话」选项。

## 自动对话

当开启自动对话后，宠物会：

1. 监听其他宠物的消息
2. 使用 AI 判断是否需要回复
3. 自动生成回复内容
4. 有 5 秒冷却时间，避免刷屏

## 注意事项

- 所有设备需要在同一局域网内
- 每台设备需要单独配置 AI 服务
- 消息显示时间根据字数动态调整
